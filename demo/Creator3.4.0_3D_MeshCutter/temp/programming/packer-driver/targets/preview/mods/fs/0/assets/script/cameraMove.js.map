{"version":3,"sources":["file:///Users/zzf520/Documents/GitHub/CococsCreator-public-technology-solutions/demo/Creator3.4.0_3D_MeshCutter/assets/script/cameraMove.ts"],"names":["_decorator","Component","Vec3","systemEvent","SystemEvent","math","macro","ccclass","property","cameraMove","start","on","EventType","KEY_UP","onKeyUp","KEY_DOWN","onKeyDown","MOUSE_MOVE","onMouseMove","event","keyCode","KEY","shift","startShift","w","startW","a","startA","s","startS","d","startD","movementX","up","right","rotationx","node","getRotation","Quat","rotateAround","movementY","setRotation","update","deltaTime","translate"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Vec3, systemEvent, SystemEvent, math, macro } from 'cc';\nconst { ccclass, property } = _decorator;\n@ccclass('cameraMove')\nexport class cameraMove extends Component {\n\n\n    private startShift = false;\n    private startW = false;\n    private startA = false;\n    private startS = false;\n    private startD = false;\n\n    start() {\n\n        //键盘监听\n        systemEvent.on(SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n        systemEvent.on(SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n\n        //鼠标监听\n        systemEvent.on(SystemEvent.EventType.MOUSE_MOVE, this.onMouseMove, this);\n\n    }\n\n    onKeyUp(event) {\n        switch (event.keyCode) {\n            case macro.KEY.shift:\n                this.startShift = false;\n                break;\n            case macro.KEY.w:\n                this.startW = false;\n                break;\n            case macro.KEY.a:\n                this.startA = false;\n                break;\n            case macro.KEY.s:\n                this.startS = false;\n                break;\n            case macro.KEY.d:\n                this.startD = false;\n                break;\n        }\n    }\n\n    onKeyDown(event) {\n        switch (event.keyCode) {\n            case macro.KEY.shift:\n                this.startShift = true;\n                break;\n            case macro.KEY.w:\n                this.startW = true;\n                break;\n            case macro.KEY.a:\n                this.startA = true;\n                break;\n            case macro.KEY.s:\n                this.startS = true;\n                break;\n            case macro.KEY.d:\n                this.startD = true;\n                break;\n        }\n    }\n\n    onMouseMove(event) {\n        if (event.movementX != 0 && this.startShift) {\n            const up = new Vec3(0, 1, 0);\n            const right = new Vec3(1, 0, 0);\n            const rotationx = this.node.getRotation();\n            math.Quat.rotateAround(rotationx, rotationx, up, -event.movementX / 5 / 360.0 * 3.1415926535);\n            math.Quat.rotateAround(rotationx, rotationx, right, -event.movementY / 2.5 / 360.0 * 3.1415926535);\n            this.node.setRotation(rotationx);\n        }\n    }\n\n    update(deltaTime: number) {\n\n        if (this.startW) {\n\n            this.node.translate(new Vec3(0, deltaTime, 0));\n        }\n\n        if (this.startA) {\n\n            this.node.translate(new Vec3(-deltaTime, 0, 0));\n\n        }\n\n        if (this.startS) {\n\n            this.node.translate(new Vec3(0, -deltaTime, 0));\n\n        }\n\n        if (this.startD) {\n\n            this.node.translate(new Vec3(deltaTime, 0, 0));\n\n        }\n\n    }\n}\n"]}